<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<!-- TODO: most of this stuff (where no dependency is needed on fluxdock_membership) can be moved to theme -->

	<!-- disable original -->
	<record id="auth_signup.login" model="ir.ui.view">
		<field name="name">[DISABLED] auth_signup Loging/reset pwd</field>
		<field name="active" eval="0" />
	</record>

	<template id="login" inherit_id="web.login" name="Fluxdock Sign up - Reset Password">

		<xpath expr="//div[hasclass('field-db')]" position="before">
			<h2>
				THROUGH COLLABORATION TO INNOVATION
			</h2>
		</xpath>

		<xpath expr="//button[@type='submit']" position="attributes">
			<!-- drop btn-primary -->
			<attributes name="class">btn</attributes>
		</xpath>

		<xpath expr="//button[@type='submit']" position="after">
			<div class="login-notice-wrap">
				<div t-if="signup_enabled">
					Not registered yet?
					<a t-attf-href="/web/signup?{{ keep_query() }}">Create a free account here</a>
				</div>
				<div t-if="reset_password_enabled">
					Forgot your password?
					<a t-attf-href="/web/reset_password?{{ keep_query() }}">Reset your password here</a>
				</div>
			</div>
		</xpath>
	</template>

	<template id="account_confirmation" name="Fluxdock Account confirmation">
		<t t-call="web.login_layout">
			<div class="clearfix oe_login_buttons">
				<h2>
					THANK YOU FOR VALIDATING YOUR EMAIL ADDRESS.
				</h2>
				<p>
					You can edit your profile in the Fluxdock members area. To login
					please use the choosen
					password and user name.
				</p>
				<div class="oe_login_buttons">
					<div class="button-wrap">
						<a t-attf-href="/my/account" class="btn btn-primary">Login</a>
					</div>
				</div>
			</div>
		</t>
	</template>


	<template id="thanks_for_registration" name="Fluxdock Thanks for registration">
		<div class="clearfix oe_login_buttons">
			<h2>
				THANK YOU FOR YOUR REGISTRATION.
			</h2>
			<p>
				An email with a confirmation link has been sent to your address. Please click the link, to activate your account and set your login credentials.<br/>Check your spam folder, if you did not receive any message.
			</p>
		</div>
	</template>


	<template id="reset_password" inherit_id="auth_signup.reset_password"
		      name="Fluxdock Reset password">
		<xpath expr="//t[@t-call='web.login_layout']" position="replace">
			<t t-call="web.login_layout">
				<t t-if="token">
					<h2>
						SET / CONFIRM PASSWORD
					</h2>
					<p class="text-center">
						Please set and confirm your password below.
					</p>
					<p class="text-center">
						After confirmation your can edit and complete your company profile. Please don't forget to publish your profile after completion.
					</p>
				</t>
				<t t-if="not token and not show_thanks">
					<h2>
						Reset Password
					</h2>
				</t>
				<div t-if="message and not show_thanks">
					<p class="alert alert-success" t-if="message">
						<t t-esc="message" />
					</p>
					<a href="/web/login" class="btn btn-link pull-right">Back to Login</a>
				</div>
				<t t-if="show_thanks">
					<t t-call="fluxdock_membership.thanks_for_registration" />
				</t>
				<form class="oe_reset_password_form" role="form" method="post"
					t-if="not message">
					<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />

					<t t-if="token">
						<t t-call="auth_signup.fields">
							<t t-set="only_passwords" t-value="1" />
						</t>
					</t>

					<t t-if="not token">
						<div class="form-group field-login">
							<label for="login" class="control-label">Your Email</label>
							<t t-set="login" t-value="login or request.params.get('login')" />
							<input type="text" name="login" t-att-value="login" id="login"
								class="form-control" autofocus="autofocus" required="required" />
						</div>
						<p class="text-center">We'll send you an email with a link to reset your password.</p>
					</t>

					<p class="alert alert-danger" t-if="error">
						<t t-esc="error" />
					</p>
					<input type="hidden" name="redirect" t-att-value="redirect or '/my/dock'" />
					<input type="hidden" name="token" t-att-value="token" />
					<div class="clearfix oe_login_buttons">
						<button type="submit" class="btn btn-primary">Confirm</button>
					</div>

				</form>
			</t>
		</xpath>
	</template>

	<template id="signup_buttons" name="Fluxdock sign up buttons" inherit_id="auth_signup.signup">
		<xpath expr="//div[hasclass('oe_login_buttons')]"
			position="replace">
			<div class="clearfix oe_login_buttons">
				<div class="button-wrap">
					<button type="submit" class="btn btn-primary">Sign up</button>
				</div>
				<p>
					Are you already registered?
					<a t-attf-href="/web/login?{{ keep_query() }}">Log in here</a>
				</p>
			</div>
		</xpath>
	</template>

	<template name="Fluxdock signup fields" id="auth_signup.fields">
		<!-- we are doing too much stuff here, let's override the whole template-->
		<!-- NOTE: redefine `auth_signup.fields` is really bad
		because we are altering the content of the original view,
		and if we uninstall this module you'll have to upgrade `auth_signup`
		to restore the original template content. -->
		<t t-if="not token">
			<h2>
				THROUGH COLLABORATION TO INNOVATION
			</h2>
		</t>

        <div class="form-group field-login">
            <label for="login" class="control-label">Your Email</label>
            <input type="text" name="login" t-att-value="login" id="login" class="form-control" autofocus="autofocus"
                autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
        </div>

		<div class="form-group field-company">
			<label for="name" class="control-label">Company Name</label>
			<input type="text" name="name" t-att-value="name" id="name"
				class="form-control" required="required"
				t-att-readonly="'readonly' if only_passwords else None"
				t-att-autofocus="'autofocus' if login and not only_passwords else None" />
		</div>

        <div class="form-group field-password">
            <label for="password" class="control-label">Password</label>
            <input type="password" name="password" id="password" class="form-control"
                required="required" t-att-autofocus="'autofocus' if only_passwords else None"/>
        </div>

        <div class="form-group field-confirm_password">
            <label for="confirm_password" class="control-label">Confirm Password</label>
            <input type="password" name="confirm_password" id="confirm_password" class="form-control" required="required"/>
        </div>

		<t t-if="not token">
		  <t t-call="fluxdock_membership.signup_modals" />
		  <div class="form-group field-agree_to_terms form-group-checkbox">
			<input type="checkbox" name="agree_to_terms" t-att-value="agree_to_terms"
			  id="agree_to_terms" class="window-new" required="required" />
			<label for="agree_to_terms">
			  I agree to the
			  <a data-toggle="modal" data-target=".agree_to_terms_modal" href="#">Terms
				of Use</a>
			  and
			  <a data-toggle="modal" data-target=".privacy_policy_modal" href="#">Privacy
				Policy</a>
			  .
			</label>
		  </div>
		</t>
	</template>

	<template id="signup_modals" name="Fluxdock Sign up modals">
		<!-- modal for agree to terms -->
		<div class="modal fade agree_to_terms_modal" tabindex="-1" role="dialog"
		  aria-hidden="true">
		  <div class="modal-dialog modal-lg">
			<div class="modal-content">
			  <div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
					  aria-hidden="true">Ã—</button>
					<h2 class="modal-title">Terms of use fluxdock.io</h2>
			  </div>
			  <div class="modal-body">
					<p>
					  Published on 5th of April 2016
					</p>
					<p>
				 		These conditions govern the use of Fluxdock sites or services ("Services"). By using the Services, you agree to these conditions.
				 	</p>
					<ol>
					  <li>
							<p>Your contract with Fluxdock.</p>
							<p>1.1 Your contract is with the FLUXDOCK AG, a Swiss company. This contract is subject to the laws of the Canton of Basel-Country and the laws of Switzerland.</p>
					  </li>
						<li>
							<p>Your Content.</p>
							<p>2.1 Ownership: You retain all rights and ownership of your data and content. Fluxdock disclaims proprietary interest in your content.</p>
							<p>2.2 Licenses for your content. If you access our services and upload or submit content, you grant Fluxdock a worldwide license to communicate them to spread, publish, reproduce, store and use this content. The license granted by you is for the purpose of the operation of Fluxdock and the advertising for our services.</p>
							<p>2.3 Termination of the license. You can by removing your content from the Services, terminate this license at any time. However, you agree that Fluxdock may retain and use copies of your content for archival or backup purposes.</p>
						</li>
						<li>
							<p>Who can use our services?</p>
							<p>3.1 Services Authority: You can use our services if you are legally capable of contracting.</p>
							<p>3.2 International Users: It is your task to clarify whether your use of the Services, in your location country is legal. The services are not available in all languages.</p>
						</li>
						<li>
							<p>Account Information.</p>
							<p>4.1 You may create an account with us to use our services. It is your responsibility to keep your account information safe and you are responsible for all activities that occur under your account.</p>
						</li>
						<li>
							<p>User behavior.</p>
							<p>5.1 Do not use our services to do something unlawful.</p>
							<p>5.2 Identity. Since Fluxdock is a professional network of companies, we require that you use our services for and on behalf of a real company.</p>
						</li>
						<li>
							<p>Use of our services.</p>
							<p>6.1 Certain services are only available if you pay a fee or provide certain information.</p>
							<p>6.2 Unless otherwise specified in a separate agreement, we are not responsible for (a) the loss, corruption or damage to your content, (b) the deletion or accuracy of the contents, or (c) the security, privacy or communications regarding your content.</p>
							<p>6.3 We can restrict the use of services.</p>
							<p>6.4 We have no control over and are not responsible for the content of websites or services of third parties to which we refer on our website.</p>
						</li>
						<li>
							<p>Disclosure.</p>
							<p>7.1 Fluxdock shall disclose information about you or your use of a service, (A) if this is required by law (if we receive a valid subpoena or warrant); (B) in order to process your requests.</p>
						</li>
						<li>
							<p>Fluxdock materials.</p>
							<p>8.1 Fluxdock materials. The services and all trademarks, logos, software and other content and assets ("Fluxdock Materials") that Fluxdock offers as part of the Service, are protected by intellectual property rights. By using our services you acquire no rights to this intellectual property. Using Fluxdock trademarks and logos is prohibited, as is the removal, obscure or change text or proprietary notices in the Fluxdock materials.</p>
							<p>8.2 Software. If we make certain software, then this software may be subject to a separate license agreement. If no such separate license agreement exists, then granted Fluxdock you a personal, non-transferable, non-sublicensable license to use the software solely for the purpose of using our services. You may then not copy, modify, distribute, sell, re-engineer or decompile it.</p>
						</li>
						<li>
							<p>Your warranty and liability for damages.</p>
							<p>9.1 You represent and warrant that you have all intellectual property rights (or have received all necessary consents) for your content and have the right to grant the license indicated above us in Section 2.2.</p>
							<p>9.2 You represent and warrant that your content does not infringe any intellectual property or other proprietary rights, including the right of publicity or privacy of any natural or legal person.</p>
						</li>
						<li>
							<p>Settlement of Disputes</p>
							<p>10.1 Jurisdiction for disputes with Fluxdock is the canton of Basel-Country, Switzerland, unless otherwise agreed in writing.</p>
						</li>
						<li>
							<p>Termination.</p>
							<p>11.1 You may not use our services at any time.</p>
							<p>11.2 We can add features or functions, change or remove them, and we may suspend or terminate services.</p>
							<p>11.3 Usage fees that were paid before a termination shall not be refunded. By canceling your account you will not be exempt from unfunded commitments.</p>
							<p>11.4 If our service are stopped or interrupted, then we will take the reasonable efforts to notify you and provide you with the ability to access your content.</p>
						</li>
						<li>
							<p>Communication</p>
							<p>12.1 Notices to Fluxdock: Please send your correspondence to the following address: FLUXDOCK AG, Freilager-Platz 3, 4142 MÃ¼nchenstein/Basel, Switzerland.</p>
							<p>12.2 Notification: Fluxdock notifies you either by e-mail, mail, SMS, or within the services.</p>
						</li>
						<li>
							<p>About these Terms</p>
							<p>13.1 German version. For the interpretation of these Terms of Use, the German version is authoritative.</p>
							<p>13.2 Severability. If any part of these Terms is invalid or unenforceable, the remainder retains its force and effect.</p>
							<p>13.3 No waiver. If we waive the enforcement of these conditions, this does not constitute a waiver of our rights for enforcement.</p>
							<p>13.4 Assignment or transfer: You can not transfer to another person or assign your rights and obligations under this Agreement without the written consent of Fluxdock. We may assign our rights and obligations without your permission.</p>
							<p>13.5 Change. We can customize these conditions. We publish changes to these terms on this page. Your continued use of the Services after the changes take effect, you agree to the revised terms.</p>
						</li>
					</ol>
			  </div>
			</div>
		  </div>
		</div>
		<!-- TODO: this stuff should be moved to website_legal_page features -->
		<!-- modal end -->
		<!-- modal for privacy policy -->
		<div class="modal fade privacy_policy_modal" tabindex="-1" role="dialog"
		  aria-hidden="true">
		  <div class="modal-dialog modal-lg">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
				  aria-hidden="true">Ã—</button>
				<h2 class="modal-title">Privacy Policy fluxdock.io</h2>
			  </div>
			  <div class="modal-body">
					<p>
						Published on 5th of April 2016
					</p>
					<p>Fluxdock is an online platform where companies present themselves, exchange with one another and organise.</p>
					<p>Fluxdock is operated from Switzerland and can be accessed on the internet at www.fluxdock.io.</p>
					<p>Fluxdock provides no user data with third parties. The user-managed user profiles and reference projects of the company, however, are in terms of operation and objectives of Fluxdock publicly available.</p>
			  </div>
			</div>
		  </div>
		</div>
		<!-- modal end -->
	</template>

</odoo>
